<div class="ibox-content">
    <form class="form-horizontal m-t" id="commentForm" action="">
        <div class="form-group">
            <label class="col-sm-3 control-label">*登录名称:</label>
            <div class="col-sm-8">
                <input id="login_name" name="login_name" placeholder="2-20位字符，支持字母、数字下划线组合"  minlength="2" type="text" class="form-control" required="" aria-required="true">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label">用户名称:</label>
            <div class="col-sm-8">
                <input id="user_name" name="user_name" placeholder="填写用户中文姓名" type="text" class="form-control" required="" aria-required="true" >
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label">用户密码:</label>
            <div class="col-sm-8">
                <input id="password" name="password"  class="form-control"  type="password" required="">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label">确认密码:</label>
            <div class="col-sm-8">
                <input id="repassword" name="repassword"  class="form-control"  type="password" required="">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label">手机号码:</label>
            <div class="col-sm-8">
                <input id="mobile" name="mobile"  class="form-control" type="text" >
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label">电话号码:</label>
            <div class="col-sm-8">
                <input id="phone" name="phone"  class="form-control" type="text" >
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label">地址:</label>
            <div class="col-sm-8">
                <input id="address" name="address"  class="form-control" type="text" >
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label">email:</label>
            <div class="col-sm-8">
                <input id="email" name="email"  type="email"  class="form-control" >
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label">部门:</label>
            <div class="col-sm-8">
                <input id="curl" type="text" class="form-control" name="url">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label">是否可用:</label>
            <div class="col-sm-8">
                <input id="curl" type="text" class="form-control" name="url">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label">排序:</label>
            <div class="col-sm-8">
                <input id="curl" type="text" class="form-control" name="url">
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label">角色:</label>
            <div class="col-sm-8">
                <input id="curl" type="text" class="form-control">
            </div>
        </div>


        <div class="form-group">
            <div class="col-sm-4 col-sm-offset-3">
                <button class="btn btn-primary" type="submit"><i class="fa fa-check"></i> 保存</button>
            </div>
            <div class="col-sm-3 col-sm-offset-1">
                <button class="btn btn-default" type="button"><i class="fa fa-reply"></i> 取消</button>
            </div>
        </div>
    </form>
</div>



## 引入js
#define($jsblock)
<script type="text/javascript" src="#springUrl("")/static/js/plugins/validate/jquery.validate.min.js?$!application.getAttribute('/static/js/plugins/validate/jquery.validate.min.js')"></script>
<script type="text/javascript" src="#springUrl("")/static/js/plugins/validate/messages_zh.min.js?$!application.getAttribute('/static/js/plugins/validate/messages_zh.min.js')"></script>

<script>

//    $(function(){
//        //获取角色信息添加到select中
//        setRoles();
//    });

##    function setRoles(){
##        $.ajax({
##            url:"${rc.contextPath}/role/getAll.json",
##            type:"POST",
##            success: function(returnData){
##                var selHtml = "";
##                $.each(returnData.data, function(i, item){
##                    selHtml += "<option value='"+item.roleId+"'>"+item.roleName+"</option>";
##                });
##                $("#roleSel").html(selHtml);
##            }
##        });
##    }
    $.validator.setDefaults(
        {highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},
            success:function(e){
                e.closest(".form-group").removeClass("has-error").addClass("has-success")
            },
            errorElement:"span",
            errorPlacement:function(e,r){e.appendTo(r.is(":radio")||r.is(":checkbox")?r.parent().parent().parent():r.parent())},
            errorClass:"help-block m-b-none",validClass:"help-block m-b-none"}
    ),
    $().ready(
        function(){
            var e="<i class='fa fa-times-circle'></i> ";
            $("#commentForm").validate(
                {
                    rules:{
                        repassword:{
                            equalTo:"#password"
                        }
                    },
                    messages:{
                        repassword:{
                            equalTo:e+"两次输入的密码不一致"
                        }
                    }
                }
            );
        }
    );

    $(".btn-primary").click(function(){
        addUser();
    })


    function addUser(){
        var login_name = $("#login_name").val();
        var user_name = $("#user_name").val();
        var password = $("#password").val();
        var mobile = $("#mobile").val();
        var phone = $("#phone").val();
        var address = $("#address").val();
        var email = $("#email").val();
        var department_id = $("#department_id").val();
        var is_enabled = $("#is_enabled").val();
        var order = $("#order").val();
        var roleIds = $("#roleIds").val();
//    	if(realName == "" || acctId == "" || email == "" || phone == "" || passwd == "" || repasswd == ""){
//    		alert("所有信息均为必填项, 请填写完整!");
//    		return;
//    	}
//    	if(passwd != repasswd){
//    		alert("两次密码输入不一致, 请重新填写!");
//    		return;
//    	}
        $.ajax({
            url:"/user/add.json",
            type:"post",
            data:{
                loginName:login_name,
                userName:user_name,
                password:password,
                mobile:mobile,
                phone:phone,
                address:address,
                email:email,
                departmentId:department_id,
                isEnabled:is_enabled,
                order:order,
                roleIds:roleIds
            },
            success: function(returnData){
                console.log(returnData);
                if(returnData.code == 1){
                    layer.msg('添加成功!');
                    window.location.href = "/user/toList";
                } else{
                    layer.msg('添加失败, 请联系技术人员!');
                }
            }

        });
    }

// 返回
$(".btn-default").click(function(){
    history.go(-1);
})
</script>
#end