
## css文件引入和css代码块
#define($cssblock)
#end



<div class="wrapper wrapper-content">
    <div class="row">
        <div class="col-sm-12">

            ## 查询条件
            ## 示例（查询条件）
            <div class="ibox float-e-margins">
                <div class="tabs-container">
                    <ul class="nav nav-tabs">
                        <li class="active" lid="1"><a data-toggle="tab" href="#tab-1" aria-expanded="true"> 时间汇总</a>
                        </li>
                        <li class="" lid="2"><a data-toggle="tab" href="#tab-2" aria-expanded="false">地域汇总</a>
                        </li>
                        <li class="" lid="3"><a data-toggle="tab" href="#tab-3" aria-expanded="false">销售汇总</a>
                        </li>
                        <li class="" lid="4"><a data-toggle="tab" href="#tab-4" aria-expanded="false">客户汇总</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div id="tab-1" class="tab-pane active">
                            <div class="panel-body">
                                <form class="form-horizontal m-t">
                                    <div class="form-group">
                                        <div class="col-sm-8">
                                            <input placeholder="开始日期" class="laydate-icon form-control layer-date startDate" id="startDate1">
                                            <input placeholder="结束日期" class="laydate-icon form-control layer-date endDate" id="endDate1">
                                        </div>

                                        <div class="col-sm-4 m-b-xs text-right">
                                            <div data-toggle="buttons" class="btn-group">
                                                <label class="btn btn-sm btn-white active">
                                                    <input type="radio" id="option1" name="options" value="1">月</label>
                                                <label class="btn btn-sm btn-white">
                                                    <input type="radio" id="option2" name="options" value="2">季度</label>
                                                <label class="btn btn-sm btn-white">
                                                    <input type="radio" id="option3" name="options" value="3">半年</label>
                                                <label class="btn btn-sm btn-white">
                                                    <input type="radio" id="option4" name="options" value="4">年</label>
                                            </div>
                                            <a href="javascript:;" class="btn btn-success button_view"><i class="fa fa-search "></i> 查询 </a>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div id="tab-2" class="tab-pane">
                            <div class="panel-body">
                                <form class="form-horizontal m-t">
                                    <div class="form-group">
                                        <div class="col-sm-8">
                                            <input placeholder="开始日期" class="laydate-icon form-control layer-date startDate" id="startDate2">
                                            <input placeholder="结束日期" class="laydate-icon form-control layer-date endDate" id="endDate2">
                                        </div>

                                        <div class="col-sm-4 m-b-xs text-right">
                                            <a href="javascript:;" class="btn btn-success button_view"><i class="fa fa-search "></i> 查询 </a>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div id="tab-3" class="tab-pane">
                            <div class="panel-body">
                                <form class="form-horizontal m-t">
                                    <div class="form-group">
                                        <div class="col-sm-8">
                                            <input placeholder="开始日期" class="laydate-icon form-control layer-date startDate" id="startDate3">
                                            <input placeholder="结束日期" class="laydate-icon form-control layer-date endDate" id="endDate3">
                                        </div>

                                        <div class="col-sm-4 m-b-xs text-right">
                                            ##<div data-toggle="buttons" class="btn-group">
                                                ##<label class="btn btn-sm btn-white active">
                                                    ##<input type="radio" id="option0" name="options" value="0">无</label>
                                              ##  <label class="btn btn-sm btn-white ">
                                                  ##  <input type="radio" id="option1" name="options" value="1">月</label>
                                                ##<label class="btn btn-sm btn-white">
                                                ##    <input type="radio" id="option2" name="options" value="2">季度</label>
                                               ## <label class="btn btn-sm btn-white">
                                                  ##  <input type="radio" id="option3" name="options" value="3">半年</label>
                                                ##<label class="btn btn-sm btn-white">
                                                 ##   <input type="radio" id="option4" name="options" value="4">年</label>
                                            ##</div>
                                            <a href="javascript:;" class="btn btn-success button_view"><i class="fa fa-search "></i> 查询 </a>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div id="tab-4" class="tab-pane">
                            <div class="panel-body">
                                <form class="form-horizontal m-t">
                                    <div class="form-group">
                                        <div class="col-sm-8">
                                            <input placeholder="开始日期" class="laydate-icon form-control layer-date startDate" id="startDate4">
                                            <input placeholder="结束日期" class="laydate-icon form-control layer-date endDate" id="endDate4">
                                        </div>

                                        <div class="col-sm-4 m-b-xs text-right">
                                            <div data-toggle="buttons" class="btn-group">
                                                <label class="btn btn-sm btn-white active">
                                                    <input type="radio" id="option1" name="options" value="1">4A公司</label>
                                                <label class="btn btn-sm btn-white">
                                                    <input type="radio" id="option2" name="options" value="2">直客</label>
                                            </div>
                                            <a href="javascript:;" class="btn btn-success button_view"><i class="fa fa-search "></i> 查询 </a>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
##                <div class="ibox-content">
##                    <form class="form-horizontal m-t">
##                        <div class="form-group">
##                            <div class="col-sm-10">
##                                <input placeholder="开始日期" class="laydate-icon form-control layer-date" id="startDate">
##                                <input placeholder="结束日期" class="laydate-icon form-control layer-date" id="endDate">
##                            </div>
##                        </div>
##                    </form>
##                </div>
            </div>

            ## 查询结果
            <div class="row">
                <div class="col-sm-12">
                    <div class="ibox float-e-margins"  >
                        <div class="ibox float-e-margins"  >
							<div class="ibox-content" id="top3" style="height:450px;display:none;" >
								<div id="echart-container" style="margin-left:-100px;float:left;width:650px;height:400px;" ></div>
								 <div id="echart-top3" style="margin-right:50px;float:right;width:450px;height:400px;" ></div>
							</div>
							<div class="ibox-content" id="bar">
								<div id="echart-bar" style="width:1100px;height:450px;" ></div>                          
							</div>
						</div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>




## js文件引入和js代码块
#define($jsblock)
<script src="#springUrl("")/static/js/plugins/echarts/echarts-3.6.2.min.js?$!application.getAttribute('/static/js/plugins/echarts/echarts-3.6.2.min.js')" type="text/javascript" language="javascript"></script>
##<script src="#springUrl("")/static/js/plugins/echarts/echarts.js?$!application.getAttribute('/static/js/plugins/echarts/echarts.js')" type="text/javascript" language="javascript"></script>
<script src="#springUrl("")/static/js/plugins/layer/laydate/laydate.js?$!application.getAttribute('/static/js/plugins/layer/laydate/laydate.js')" type="text/javascript" language="javascript"></script>
<script>
    $(function() {
        // 初始化日期控件
        initLaydate();
        //载入图表
        initChart();
    })

    ## 示例（开始日期、结束日期）
    function initLaydate(){
        var start1 = {
            elem: "#startDate1",
//            format: "YYYY/MM/DD hh:mm:ss",
            format: "YYYY/MM/DD",
//            min: laydate.now(),
            max: laydate.now(),
//            istime: true,
            istoday: true,
            choose: function(datas) {
                end1.min = datas;
                end1.start = datas }
        };
        var end1 = {
            elem: "#endDate1",
//            format: "YYYY/MM/DD hh:mm:ss",
            format: "YYYY/MM/DD",
//            min: laydate.now(),
            max: laydate.now(),
//            istime: true,
            istoday: false,
            choose: function(datas) {
                start1.max = datas }
        };
        var start2 = {
            elem: "#startDate2",
//            format: "YYYY/MM/DD hh:mm:ss",
            format: "YYYY/MM/DD",
//            min: laydate.now(),
            max: laydate.now(),
//            istime: true,
            istoday: true,
            choose: function(datas) {
                end2.min = datas;
                end2.start = datas }
        };
        var end2 = {
            elem: "#endDate2",
//            format: "YYYY/MM/DD hh:mm:ss",
            format: "YYYY/MM/DD",
//            min: laydate.now(),
            max: laydate.now(),
//            istime: true,
            istoday: false,
            choose: function(datas) {
                start2.max = datas }
        };
        var start3 = {
            elem: "#startDate3",
//            format: "YYYY/MM/DD hh:mm:ss",
            format: "YYYY/MM/DD",
//            min: laydate.now(),
            max: laydate.now(),
//            istime: true,
            istoday: true,
            choose: function(datas) {
                end3.min = datas;
                end3.start = datas }
        };
        var end3 = {
            elem: "#endDate3",
//            format: "YYYY/MM/DD hh:mm:ss",
            format: "YYYY/MM/DD",
//            min: laydate.now(),
            max: laydate.now(),
//            istime: true,
            istoday: false,
            choose: function(datas) {
                start3.max = datas }
        };
        var start4 = {
            elem: "#startDate4",
//            format: "YYYY/MM/DD hh:mm:ss",
            format: "YYYY/MM/DD",
//            min: laydate.now(),
            max: laydate.now(),
//            istime: true,
            istoday: true,
            choose: function(datas) {
                end4.min = datas;
                end4.start = datas }
        };
        var end4 = {
            elem: "#endDate4",
//            format: "YYYY/MM/DD hh:mm:ss",
            format: "YYYY/MM/DD",
//            min: laydate.now(),
            max: laydate.now(),
//            istime: true,
            istoday: false,
            choose: function(datas) {
                start4.max = datas }
        };
        laydate(start1);
        laydate(end1);
        laydate(start2);
        laydate(end2);
        laydate(start3);
        laydate(end3);
        laydate(start4);
        laydate(end4);
    }



    // 基于准备好的dom，初始化echarts实例
    var chart = echarts.init(document.getElementById('echart-container'));
	var topchart = echarts.init(document.getElementById('echart-top3'));
	var barchart = echarts.init(document.getElementById('echart-bar'));
    //查询
    function initChart() {
        chart.clear();
        topchart.clear();
		barchart.clear();
        chart.showLoading({text: '正在努力的读取数据中...'});
        var lid = $(".nav-tabs li.active").attr("lid");
        var startDate = $(".tab-content div.active .startDate").val();
        var endDate = $(".tab-content div.active .endDate").val();
        var type = $(".tab-content div.active .btn-group label.active input").val();

        $.ajax({
            url:"/report/sale/history/query.json",
            type:"post",
            async: false,
            data:{
                lid:lid,
                startDate:startDate,
                endDate:endDate,
                type:type
            },
            success: function(returnData){
                chart.hideLoading();
                if (returnData.code == '1') {
                    if(returnData.line.title){
                   		$("#top3").show();
						$("#bar").hide();
                   		chart.setOption(returnData.data, true);
                   		topchart.setOption(returnData.line, true);
                    }else{
						$("#top3").hide();
						$("#bar").show();
						barchart.setOption(returnData.data, true);
					}
//                    chart.setOption(test, true);
                } else {
                    console.log("返回结果有误");
                }
            }
        });
    }

    $(".button_view").click(function () {
        initChart();
    })




    var test = {
    }
</script>
#end